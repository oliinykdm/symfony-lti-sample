{% extends 'base.html.twig' %}

    {% block title %}Courses list{% endblock %}

    {% block body %}
        {% if user.user.role|toString == constant('CourseHub\\Common\\Domain\\LtiSettings::MEMBERSHIP_CONTENTDEVELOPER') %}
            <h2 class="pb-2 border-bottom">Integrations</h2>
        {% else %}
            <h2 class="pb-2 border-bottom">Courses</h2>
        {% endif %}
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th scope="col">UUID</th>
                <th scope="col">Tool Name</th>
                {% if user.user.role|toString == constant('CourseHub\\Common\\Domain\\LtiSettings::MEMBERSHIP_CONTENTDEVELOPER') %}
                <th scope="col">Edit</th>
                <th scope="col">Delete</th>
                {% else %}
                    <th scope="col">Start</th>
                <th scope="col">Status</th>
                {% endif %}
            </tr>
            </thead>
            <tbody>
            {% for course in courses %}
                <tr>
                    <th>{{ course.uuid }}</th>
                    <td class="w-50">{{ course.tool_name }}</td>

                    {% if user.user.role|toString == constant('CourseHub\\Common\\Domain\\LtiSettings::MEMBERSHIP_CONTENTDEVELOPER') %}
                    <td><a href="/course/edit/{{ course.uuid }}" class="btn btn-outline-success">Edit</a></td>
                    <td><a href="/course/delete/{{ course.uuid }}" class="btn btn-outline-danger">Delete</a></td>
                    {% else %}
                        {% if course.is_completed == false %}
                            <td><a href="{{ path('start', {'type': 'LtiResourceLinkRequest', 'uuid': course.uuid}) }}" class="btn btn-outline-secondary">Start</a></td>
                        {% else %}
                            <td><button class="btn btn-outline-secondary disabled">Start</button></td>
                        {% endif %}
                        <td>
                        {% if course.is_completed == false %}
                            <button type="button" class="btn btn-secondary">Not completed</button>
                        {% else %}
                            <a href="{{ path('completion_info', {'completionId': course.completion_id|toString}) }}" target="_blank" class="btn btn-success">Completed</a>
                        {% endif %}

                        </td>
                    {% endif %}

                </tr>

            {% endfor %}

            </tbody>
        </table>

    {% endblock %}
