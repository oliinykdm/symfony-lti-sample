{% extends 'base.html.twig' %}

    {% block title %}Courses list{% endblock %}

    {% block body %}
        <h2 class="pb-2 border-bottom">Courses List</h2>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th scope="col">UUID</th>
                <th scope="col">Tool Name</th>
                <th scope="col">Run</th>
                {% if user.user.role|toString == constant('CourseHub\\Common\\Domain\\LtiSettings::MEMBERSHIP_CONTENTDEVELOPER') %}
                <th scope="col">Edit</th>
                <th scope="col">Delete</th>
                {% else %}
                <th scope="col">Status</th>
                {% endif %}
            </tr>
            </thead>
            <tbody>
            {% for course in courses %}
                <tr>
                    <th>{{ course.uuid }}</th>
                    <td class="w-50">{{ course.tool_name }}</td>
                    {% if course.is_completed == false %}
                        <td><a href="{{ path('run', {'type': 'LtiResourceLinkRequest', 'uuid': course.uuid}) }}" class="btn btn-outline-secondary">Run</a></td>
                    {% else %}
                        <td><button class="btn btn-outline-secondary disabled">Run</button></td>
                    {% endif %}


                    {% if user.user.role|toString == constant('CourseHub\\Common\\Domain\\LtiSettings::MEMBERSHIP_CONTENTDEVELOPER') %}
                    <td><a href="/course/edit/{{ course.uuid }}" class="btn btn-outline-success">Edit</a></td>
                    <td><a href="/course/delete/{{ course.uuid }}" class="btn btn-outline-danger">Delete</a></td>
                    {% else %}
                        <td>
                        {% if course.is_completed == false %}
                            <button type="button" class="btn btn-secondary">Not completed</button>
                        {% else %}
                            <a href="{{ path('completion_info', {'completionId': course.completion_id|toString}) }}" target="_blank" class="btn btn-success">Completed</a>
                        {% endif %}

                        </td>
                    {% endif %}

                </tr>

            {% endfor %}

            </tbody>
        </table>

    {% endblock %}
